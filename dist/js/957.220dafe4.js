"use strict";(self["webpackChunkmini_crm"]=self["webpackChunkmini_crm"]||[]).push([[957],{2957:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var u=a(3396),s=a(7139);const n=(0,u._)("strong",null,"Имя владельца",-1),l=(0,u._)("strong",null,"Телефон",-1),r=(0,u._)("strong",null,"Сумма",-1),p=(0,u._)("strong",null,"Статус",-1),o=(0,u.Uk)(": "),c={class:"form-control"},i={key:2,class:"text-center text-white"};function d(e,t,a,d,v,m){const k=(0,u.up)("app-loader"),y=(0,u.up)("app-status"),g=(0,u.up)("app-select-status"),w=(0,u.up)("app-page");return d.loading?((0,u.wg)(),(0,u.j4)(k,{key:0})):d.request?((0,u.wg)(),(0,u.j4)(w,{key:1,title:"Заявка",back:!0},{default:(0,u.w5)((()=>[(0,u._)("p",null,[n,(0,u.Uk)(": "+(0,s.zw)(d.request.fio),1)]),(0,u._)("p",null,[l,(0,u.Uk)(": "+(0,s.zw)(d.request.phone),1)]),(0,u._)("p",null,[r,(0,u.Uk)(": "+(0,s.zw)(d.currencyFormat(d.request.amount)),1)]),(0,u._)("p",null,[p,o,(0,u.Wm)(y,{type:d.request.status},null,8,["type"])]),(0,u._)("div",c,[(0,u.Wm)(g,{modelValue:d.status,"onUpdate:modelValue":t[0]||(t[0]=e=>d.status=e)},null,8,["modelValue"])]),(0,u._)("button",{class:"btn danger",onClick:t[1]||(t[1]=(...e)=>d.remove&&d.remove(...e))},"Удалить"),d.hasChanges?((0,u.wg)(),(0,u.iD)("button",{key:0,class:"btn",onClick:t[2]||(t[2]=(...e)=>d.update&&d.update(...e))},"Обновить")):(0,u.kq)("",!0)])),_:1})):((0,u.wg)(),(0,u.iD)("h3",i," Заявки с ID = "+(0,s.zw)(d.id)+" нет ",1))}var v=a(2397),m=a(8414),k=a(5586),y=a(9654),g=a(678),w=a(4870),h=a(65),_=a(4100),q={setup(){const e=(0,g.yj)(),t=(0,g.tv)(),a=(0,h.oR)(),s=(0,w.iH)(!0),n=(0,w.iH)({}),l=e.params.id,r=(0,w.iH)();(0,u.bv)((async()=>{s.value=!0,n.value=await a.dispatch("request/loadById",l),r.value=n.value?.status,s.value=!1}));const p=(0,u.Fl)((()=>n.value.status!=r.value)),o=async()=>{await a.dispatch("request/remove",l),t.push("/")},c=async()=>{const e={...n.value,status:r.value,id:l};await a.dispatch("request/update",e),n.value.status=r.value};return{loading:s,request:n,id:l,status:r,hasChanges:p,remove:o,update:c,currencyFormat:(0,_.A)("re-Ru",{currency:"RUB",style:"currency"})}},components:{AppPage:v.Z,AppLoader:m.Z,AppStatus:k.Z,AppSelectStatus:y.Z}},f=a(89);const b=(0,f.Z)(q,[["render",d]]);var C=b}}]);