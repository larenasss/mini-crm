"use strict";(self["webpackChunkmini_crm"]=self["webpackChunkmini_crm"]||[]).push([[344],{7344:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var u=a(3396),s=a(7139),n=a(9242);const l=(0,u._)("strong",null,"Имя владельца",-1),o=(0,u._)("strong",null,"Телефон",-1),r=(0,u._)("strong",null,"Сумма",-1),p=(0,u._)("strong",null,"Статус",-1),c=(0,u.Uk)(": "),i={class:"form-control"},d=(0,u._)("option",{disabled:"",selected:""},"Выберите статус",-1),v=(0,u._)("option",{value:"done"},"Завершен",-1),_=(0,u._)("option",{value:"cancelled"},"Отменен",-1),y=(0,u._)("option",{value:"active"},"Активен",-1),g=(0,u._)("option",{value:"pending"},"Выполняется",-1),k=[d,v,_,y,g],m={key:2,class:"text-center text-white"};function w(e,t,a,d,v,_){const y=(0,u.up)("app-loader"),g=(0,u.up)("app-status"),w=(0,u.up)("app-page");return d.loading?((0,u.wg)(),(0,u.j4)(y,{key:0})):d.request?((0,u.wg)(),(0,u.j4)(w,{key:1,title:"Заявка",back:!0},{default:(0,u.w5)((()=>[(0,u._)("p",null,[l,(0,u.Uk)(": "+(0,s.zw)(d.request.fio),1)]),(0,u._)("p",null,[o,(0,u.Uk)(": "+(0,s.zw)(d.request.phone),1)]),(0,u._)("p",null,[r,(0,u.Uk)(": "+(0,s.zw)(d.currencyFormat(d.request.amount)),1)]),(0,u._)("p",null,[p,c,(0,u.Wm)(g,{type:d.request.status},null,8,["type"])]),(0,u._)("div",i,[(0,u.wy)((0,u._)("select",{id:"status","onUpdate:modelValue":t[0]||(t[0]=e=>d.status=e)},k,512),[[n.bM,d.status]])]),(0,u._)("button",{class:"btn danger",onClick:t[1]||(t[1]=(...e)=>d.remove&&d.remove(...e))},"Удалить"),d.hasChanges?((0,u.wg)(),(0,u.iD)("button",{key:0,class:"btn",onClick:t[2]||(t[2]=(...e)=>d.update&&d.update(...e))},"Обновить")):(0,u.kq)("",!0)])),_:1})):((0,u.wg)(),(0,u.iD)("h3",m," Заявки с ID = "+(0,s.zw)(d.id)+" нет ",1))}var h=a(926),b=a(8414),q=a(6640),f=a(678),C=a(4870),U=a(65),z=a(4100),A={setup(){const e=(0,f.yj)(),t=(0,f.tv)(),a=(0,U.oR)(),s=(0,C.iH)(!0),n=(0,C.iH)({}),l=e.params.id,o=(0,C.iH)();(0,u.bv)((async()=>{s.value=!0,n.value=await a.dispatch("request/loadById",l),o.value=n.value?.status,s.value=!1}));const r=(0,u.Fl)((()=>n.value.status!=o.value)),p=async()=>{await a.dispatch("request/remove",l),t.push("/")},c=async()=>{const e={...n.value,status:o.value,id:l};await a.dispatch("request/update",e),n.value.status=o.value};return{loading:s,request:n,id:l,status:o,hasChanges:r,remove:p,update:c,currencyFormat:(0,z.A)("re-Ru",{currency:"RUB",style:"currency"})}},components:{AppPage:h.Z,AppLoader:b.Z,AppStatus:q.Z}},Z=a(89);const j=(0,Z.Z)(A,[["render",w]]);var D=j}}]);